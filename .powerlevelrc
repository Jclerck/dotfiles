## Font

POWERLEVEL9K_MODE="flat"

## Displays

POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(prompt node_version vcs)
POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(battery load os_icon)

POWERLEVEL9K_SHORTEN_DELIMITER=""
POWERLEVEL9K_SHORTEN_DIR_LENGTH=1
POWERLEVEL9K_SHORTEN_STRATEGY=truncate_middle

# Git

POWERLEVEL9K_SHOW_CHANGESET="false"

POWERLEVEL9K_VCS_MODIFIED_BACKGROUND="003"
POWERLEVEL9K_VCS_MODIFIED_FOREGROUND="000"

POWERLEVEL9K_VCS_UNTRACKED_BACKGROUND="005"
POWERLEVEL9K_VCS_UNTRACKED_FOREGROUND="000"

POWERLEVEL9K_VCS_CLEAN_BACKGROUND="002"
POWERLEVEL9K_VCS_CLEAN_FOREGROUND="000"

# Rust

POWERLEVEL9K_RUST_VERSION_BACKGROUND="001"
POWERLEVEL9K_RUST_VERSION_FOREGROUND="000"

# Node

POWERLEVEL9K_NODE_VERSION_BACKGROUND="002"
POWERLEVEL9K_NODE_VERSION_FOREGROUND="000"

## Load

POWERLEVEL9K_LOAD_CRITICAL_BACKGROUND="001"
POWERLEVEL9K_LOAD_CRITICAL_FOREGROUND="000"
POWERLEVEL9K_LOAD_CRITICAL_VISUAL_IDENTIFIER_COLOR="000"

POWERLEVEL9K_LOAD_NORMAL_BACKGROUND="002"
POWERLEVEL9K_LOAD_NORMAL_FOREGROUND="000"
POWERLEVEL9K_LOAD_NORMAL_VISUAL_IDENTIFIER_COLOR="000"

POWERLEVEL9K_LOAD_WARNING_BACKGROUND="003"
POWERLEVEL9K_LOAD_WARNING_FOREGROUND="000"
POWERLEVEL9K_LOAD_WARNING_VISUAL_IDENTIFIER_COLOR="000"

## Battery

DEFAULT_COLOR="208"
DEFAULT_COLOR_INVERTED="000"

POWERLEVEL9K_BATTERY_LOW_THRESHOLD="10"

POWERLEVEL9K_BATTERY_CHARGING_BACKGROUND="004"
POWERLEVEL9K_BATTERY_CHARGING_FOREGROUND="000"
POWERLEVEL9K_BATTERY_CHARGING_VISUAL_IDENTIFIER_COLOR="000"

POWERLEVEL9K_BATTERY_CHARGED_BACKGROUND="003"
POWERLEVEL9K_BATTERY_CHARGED_FOREGROUND="000"
POWERLEVEL9K_BATTERY_CHARGED_VISUAL_IDENTIFIER_COLOR="000"

POWERLEVEL9K_BATTERY_LOW_BACKGROUND="001"
POWERLEVEL9K_BATTERY_LOW_FOREGROUND="000"
POWERLEVEL9K_BATTERY_LOW_VISUAL_IDENTIFIER_COLOR="000"

## Custom

prompt_prompt() {
  local current_path="%~"
  local who=$(whoami)
  local host=$(scutil --get LocalHostName)

  if [[ -n "$POWERLEVEL9K_SHORTEN_DIR_LENGTH" ]]; then
    set_default POWERLEVEL9K_SHORTEN_DELIMITER $"\U2026"

    case "$POWERLEVEL9K_SHORTEN_STRATEGY" in
      truncate_middle)
        current_path=$(pwd | sed -e "s,^$HOME,~," | sed $SED_EXTENDED_REGEX_PARAMETER "s/([^/]{$POWERLEVEL9K_SHORTEN_DIR_LENGTH})[^/]+([^/]{$POWERLEVEL9K_SHORTEN_DIR_LENGTH})\//\1$POWERLEVEL9K_SHORTEN_DELIMITER\2\//g")
      ;;
      truncate_from_right)
        current_path=$(truncatePathFromRight $(pwd | sed -e "s,^$HOME,~,") )
      ;;
      *)
        current_path="%$((POWERLEVEL9K_SHORTEN_DIR_LENGTH+1))(c:$POWERLEVEL9K_SHORTEN_DELIMITER/:)%${POWERLEVEL9K_SHORTEN_DIR_LENGTH}c"
      ;;
    esac
  fi

  local content=""

	if [[ $(tput cols) -le 50 ]]; then
  	local content=" "
	elif [[ $(tput cols) -le 100 && -e ".git" ]]; then
		local content=" "
	elif [[ $(tput cols) -le 150 ]]; then
		local content="${current_path}"
	else
		local content="${who} at ${host} in ${current_path}"
  fi
	
  if [[ $(print -P "%~") == "~" ]]; then
    "$1_prompt_segment" "$0_HOME" "$2" "004" "000" "$content" "HOME_ICON"
  elif [[ $(print -P "%~") == "~"* ]]; then
    "$1_prompt_segment" "$0_HOME_SUBFOLDER" "$2" "004" "000" "$content" "HOME_SUB_ICON"
  else
    "$1_prompt_segment" "$0_DEFAULT" "$2" "004" "000" "$content" "FOLDER_ICON"
  fi
}
